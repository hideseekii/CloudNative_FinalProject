<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>菜單列表</title>
  <style>
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #ccc; padding: 8px; }
    th { background: #f4f4f4; }
    img { max-width: 80px; }
    .search-form { margin-bottom: 1em; }
    .search-form input { margin-right: 0.5em; }
  </style>
</head>
<body>
  <h1>菜單列表</h1>

  <!-- 搜尋 / 篩選 -->
  <form method="get" class="search-form">
    <input type="text" name="q" placeholder="關鍵字" value="{{ request.GET.q }}">
    <input type="number" name="min_price" placeholder="最低價" step="0.01" value="{{ request.GET.min_price }}">
    <input type="number" name="max_price" placeholder="最高價" step="0.01" value="{{ request.GET.max_price }}">
    <button type="submit">搜尋</button>
    <a href="{% url 'menu:dish_list' %}">重置</a>
  </form>

  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>名稱（中/英）</th>
        <th>價格</th>
        <th>圖片</th>
      </tr>
    </thead>
    <tbody>
      {% for dish in dishes %}
      <tr>
        <td>{{ dish.dish_id }}</td>
        <td>
          <a href="{% url 'menu:dish_detail' dish.pk %}">
            {{ dish.name_zh }}<br><small>{{ dish.name_en }}</small>
          </a>
        </td>
        <td>NT${{ dish.price }}</td>
        <td>
          {% if dish.image_url %}
            <a href="{% url 'menu:dish_detail' dish.pk %}">
              <img src="{{ dish.image_url }}" alt="{{ dish.name_zh }}">
            </a>
          {% else %}
            —
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="4">目前沒有可用的菜品。</td></tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html>
