{% extends 'base.html' %}
{% load static %}

{% block content %}

<h1>å®¢æˆ¶è©•è«–</h1>

<!-- ğŸ” æœå°‹è¡¨å–® -->
<form method="get" style="margin-bottom: 20px;">
    <label>èœåï¼š</label>
    <input type="text" name="dish" value="{{ request.GET.dish }}">

    <label>è¨‚å–®ç·¨è™Ÿï¼š</label>
    <input type="text" name="order_id" value="{{ request.GET.order_id }}">

    <label>æ˜Ÿæ•¸ï¼š</label>
    <select name="rating">
        <option value="">-- å…¨éƒ¨ --</option>
        {% for i in "012345" %}
            <option value="{{ i }}" {% if request.GET.rating == i %}selected{% endif %}>{{ i }}â˜…</option>
        {% endfor %}
    </select>

    <label>æ’åºï¼š</label>
    <select name="sort">
        <option value="">-- é è¨­ï¼ˆæœ€æ–°ï¼‰ --</option>
        <option value="rating_desc" {% if request.GET.sort == 'rating_desc' %}selected{% endif %}>è©•åƒ¹é«˜â†’ä½</option>
        <option value="rating_asc" {% if request.GET.sort == 'rating_asc' %}selected{% endif %}>è©•åƒ¹ä½â†’é«˜</option>
        <option value="time_asc" {% if request.GET.sort == 'time_asc' %}selected{% endif %}>æ™‚é–“èˆŠâ†’æ–°</option>
        <option value="time_desc" {% if request.GET.sort == 'time_desc' %}selected{% endif %}>æ™‚é–“æ–°â†’èˆŠ</option>
    </select>

    <button type="submit">æœå°‹</button>
</form>

<!-- ğŸ§¾ è©•è«–åˆ—è¡¨è¡¨æ ¼ -->
<table border="1" style="width:100%; border-collapse: collapse;">
    <thead>
        <tr>
            <th>é¡§å®¢</th>
            <th>è¨‚å–®ç·¨è™Ÿ</th>
            <th>èœè‰²</th>
            <th>æ˜Ÿç­‰</th>
            <th>è©•è«–å…§å®¹</th>
            <th>è©•è«–æ™‚é–“</th>
        </tr>
    </thead>
    <tbody>
        {% for review in reviews %}
            <tr>
                <td>{{ review.user.username }}</td>
                <td>{{ review.order_item.order.order_id }}</td>
                <td>{{ review.order_item.dish.name_zh }}</td>
                <td>{{ review.rating }}â˜…</td>
                <td>
                    {% if review.comment %}
                        {{ review.comment }}
                    {% else %}
                        <em>ï¼ˆç„¡ç•™è¨€ï¼‰</em>
                    {% endif %}
                </td>
                <td>{{ review.created|date:"Y-m-d H:i" }}</td>
            </tr>
        {% empty %}
            <tr><td colspan="6">ç›®å‰æ²’æœ‰ç¬¦åˆæ¢ä»¶çš„è©•è«–ã€‚</td></tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}